<!DOCTYPE html>
<html>
	<head>
		<title>API Gamepad</title>
	</head>
	<body>
		

		<p id="demo"></p>
		<script>
			var gamepad;
			var rAF = window.mozRequestAnimationFrame || window.requestAnimationFrame;
			var sequencia = []

			var x = document.getElementById("demo");
			window.addEventListener("gamepadconnected", function(e) {
		
	  			x.innerHTML = "Gamepad connected at index " + e.gamepad.index + ":" + e.gamepad.id + " and " + e.gamepad.buttons.length + " buttons. <p> Pressiona a seguinte sequencia para desbloquear o personagem: <br><img src='images/buttons.jpg' id'='buttons'></p>";
	  			gamepad = e.gamepad;
	  			window.setInterval(function(){gameLoop()}, 1000);
	  		});
			window.addEventListener("gamepaddisconnected", function(e) {
	  			x.innerHTML = e.gamepad.id + " Disconnected.";
			});


			function buttonPressed(b) {
			  if (typeof(b) == "object") {
			    return b.pressed;
			  }
			  return b == 1.0;
			}
			
			function gameLoop() {
			  if (!gamepad)
			    return;
			  if (sequencia.length == 4){
			  	console.log(sequencia)
			  }
			  if (buttonPressed(gamepad.buttons[0])) {
			  	sequencia.append(0)
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 0')
			  } else if (buttonPressed(gamepad.buttons[1])) {
			  	
			    x.innerHTML = 'Pressionou bola';
			    console.log('pressed 1');
			  }else  if(buttonPressed(gamepad.buttons[2])) {
			    x.innerHTML = 'Pressionou X';
			    console.log('pressed 2');
			  } else if(buttonPressed(gamepad.buttons[3])) {
			    x.innerHTML = 'Pressionou triangulo';
			    console.log('pressed 3');
			  }else if(buttonPressed(gamepad.buttons[4])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 4');
			  }else if(buttonPressed(gamepad.buttons[5])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 5');
			  }else if(buttonPressed(gamepad.buttons[6])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 6');
			  }else if(buttonPressed(gamepad.buttons[7])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 7');
			  }else if(buttonPressed(gamepad.buttons[8])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 8');
			  }else if(buttonPressed(gamepad.buttons[9])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 9');
			  }else if(buttonPressed(gamepad.buttons[9])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 9');
			  }else if(buttonPressed(gamepad.buttons[10])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 10');
			  }else if(buttonPressed(gamepad.buttons[11])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 11');
			  }else if(buttonPressed(gamepad.buttons[12])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 12');
			  }else if(buttonPressed(gamepad.buttons[13])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 13');
			  }else if(buttonPressed(gamepad.buttons[14])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 14');
			  }else if(buttonPressed(gamepad.buttons[15])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 15');
			  }else if(buttonPressed(gamepad.buttons[16])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 16');
			  }else if(buttonPressed(gamepad.buttons[17])) {
			    x.innerHTML = 'Pressionou quadrado';
			    console.log('pressed 17');
			  }
			  var start = rAF(gameLoop);
			  
			};

		</script>
	</body>

</html>
